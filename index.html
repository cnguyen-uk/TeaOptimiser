<!DOCTYPE html>
<html>
  <head>
    <title>Calculator for required brewing water</title>
    <style>
      /* Add CSS styles for the form and input fields */
      form {
        margin: 20px;
        padding: 20px;
        border: 1px solid #ccc;
      }

      label {
        display: inline-block;
        width: 200px;
      }

      input[type="text"] {
        width: 200px;
        margin-bottom: 10px;
      }

      /* Add CSS styles for the result cell */
      #result {
        font-weight: bold;
      }

      .gray {
        background-color: #ccc;
      }

      .red {
        background-color: #ff8080;
      }

      .yellow {
        background-color: #ffff99;
      }

      .green {
        background-color: #b3ffb3;
      }
    </style>
  </head>
  <body>
    <h1>Calculator for required brewing water</h1>
    <form id="brewingForm">
      <label for="peopleInput">People:</label>
      <input type="text" id="peopleInput" name="peopleInput"><br>

      <label for="teacupSizeInput">Teacup Size (ml):</label>
      <input type="text" id="teacupSizeInput" name="teacupSizeInput"><br>

      <label for="fillInput">Teacup Fill (%):</label>
      <input type="text" id="fillInput" name="fillInput"><br>

      <label for="teapotSizeInput">Teapot Size (ml):</label>
      <input type="text" id="teapotSizeInput" name="teapotSizeInput"><br>

      <input type="submit" value="Calculate">
    </form>

    <p>Water Required (ml): <span id="result"></span></p>

    <h2>Assumptions</h2>
    <ul>
      <li>The general recommended teapot fill is between 80% and 90% of maximum capacity.</li>
      <li>If a teapot is underfilled by too much, then it can be difficult to control the temperature of the brew since the hot water will cool down too faster due to the higher surface area to volume ratio (heat loss is proportional to the surface area, and stored heat energy is proportional to the volume).</li>
      <li>If a teapot is filled over 90% of capacity, then any in-built filters may get clogged with tea leaves, which will affect pouring.</li>
    </ul>

    <h2>Result Explanation</h2>
      <ul>
        <li>If the result goes green, then the teapot is the ideal size for the water required.</li>
        <li>If the result goes yellow, then the teapot should be filled more than the required amount to reach at least 80% of the teapot size to improve heat retention, with a pitcher used to decant any leftover tea that doesn't fit in the teacup.</li>
        <li>If the result goes red, then the teapot has been overfilled (exceeds 90% of capacity).</li>
        <li>If the result goes grey, then the teapot size is logistically too small for the water required.</li>
      </ul>

    <script>
      const form = document.querySelector('#brewingForm');
      const resultEl = document.querySelector('#result');

      form.addEventListener('submit', (event) => {
        event.preventDefault();

        const people = parseInt(form.peopleInput.value);
        const teacupSize = parseInt(form.teacupSizeInput.value);
        const fill = parseInt(form.fillInput.value);
        const teapotSize = parseInt(form.teapotSizeInput.value);

        const waterRequired = people * teacupSize * fill / 100;
        const waterRatio = waterRequired / teapotSize;

        resultEl.textContent = waterRequired + 'ml';

        resultEl.classList.remove('gray', 'red', 'yellow', 'green');

        if (teapotSize < waterRequired) {
          resultEl.classList.add('gray');
        } else if (waterRatio > 0.9) {
          resultEl.classList.add('red');
        } else if (waterRatio < 0.8) {
          resultEl.classList.add('yellow');
        } else {
          resultEl.classList.add('green');
        }
      });
    </script>
  </body>
</html>
